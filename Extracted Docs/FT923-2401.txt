Pakistani villages were evacuated as the river Indus broke through irrigation barrages and embankments . The floods , the worst in living memory , have left 3m homeless .